(function(a,c,b){if(typeof module!=="undefined"&&module.exports){module.exports=b()}else{if(typeof define==="function"&&define.amd){define(b)}else{c[a]=b()}}})("fingerprint",this,function(){var d="";var j="mozilla/5.0 (windows nt 6.1; wow64; rv:43.0) gecko/20100101 firefox/43.0";var e="zh-CN,zh;q=0.8,en-US;q=0.5,en;q=0.3";var b="pc";var c="Firefox";var k="43.0";var a="windows";var h="9";var i=false;var g=function(l){var f={};this.options=this.extend(l,f);this.nativeForEach=Array.prototype.forEach;this.nativeMap=Array.prototype.map};g.prototype={extend:function(l,m){if(l==null){return m}for(var f in l){if(l[f]!=null&&m[f]!==l[f]){m[f]=l[f]}}return m},log:function(f){if(window.console){console.log(f)}},getData:function(){return d},get:function(f){var m=k*1;var n=[];if(c=="ie"&&m>=7){n.push(j);n.push(e);d=d+",userAgent:"+hex_md5(j)+",language:"+e;this.browserRedirect(j)}else{n=this.userAgentKey(n);n=this.languageKey(n)}n.push(c);n.push(k);n.push(a);n.push(h);d=d+",os:"+a+",osVersion:"+h+",browser:"+c+",browserVersion:"+k;n=this.colorDepthKey(n);n=this.screenResolutionKey(n);n=this.timezoneOffsetKey(n);n=this.sessionStorageKey(n);n=this.localStorageKey(n);n=this.indexedDbKey(n);n=this.addBehaviorKey(n);n=this.openDatabaseKey(n);n=this.cpuClassKey(n);n=this.platformKey(n);n=this.doNotTrackKey(n);n=this.pluginsKey(n);n=this.canvasKey(n);n=this.webglKey(n);var l=this.x64hash128(n.join("~~~"),31);return f(l)},userAgentKey:function(f){if(!this.options.excludeUserAgent){f.push(navigator.userAgent);d=d+",userAgent:"+hex_md5(navigator.userAgent);this.browserRedirect(navigator.userAgent)}return f},replaceAll:function(m,l,f){while(m.indexOf(l)>=0){m=m.replace(l,f)}return m},browserRedirect:function(t){var m=t.toLowerCase();var q=m.match(/ipad/i)=="ipad";var r=m.match(/iphone os/i)=="iphone os";var p=m.match(/midp/i)=="midp";var n=m.match(/rv:1.2.3.4/i)=="rv:1.2.3.4";var o=m.match(/ucweb/i)=="ucweb";var f=m.match(/android/i)=="android";var l=m.match(/windows ce/i)=="windows ce";var s=m.match(/windows mobile/i)=="windows mobile";if(q||r||p||n||o||f||l||s){d=d+",origin:mobile"}else{d=d+",origin:pc"}},languageKey:function(f){if(!this.options.excludeLanguage){f.push(navigator.language);d=d+",language:"+this.replaceAll(navigator.language," ","_")}return f},colorDepthKey:function(f){if(!this.options.excludeColorDepth){f.push(screen.colorDepth);d=d+",colorDepth:"+screen.colorDepth}return f},screenResolutionKey:function(l){if(!this.options.excludeScreenResolution){var f=this.getScreenResolution();if(typeof f!=="undefined"){l.push(f.join("x"));d=d+",screenResolution:"+f.join("x")}}return l},getScreenResolution:function(){var f;if(this.options.detectScreenOrientation){f=(screen.height>screen.width)?[screen.height,screen.width]:[screen.width,screen.height]}else{f=[screen.height,screen.width]}return f},timezoneOffsetKey:function(f){if(!this.options.excludeTimezoneOffset){f.push(new Date().getTimezoneOffset());d=d+",timezoneOffset:"+new Date().getTimezoneOffset()/60}return f},sessionStorageKey:function(f){if(!this.options.excludeSessionStorage&&this.hasSessionStorage()){f.push("sessionStorageKey");d=d+",sessionStorage:true"}return f},localStorageKey:function(f){if(!this.options.excludeSessionStorage&&this.hasLocalStorage()){f.push("localStorageKey");d=d+",localStorage:true"}return f},indexedDbKey:function(f){if(!this.options.excludeIndexedDB&&this.hasIndexedDB()){f.push("indexedDbKey");d=d+",indexedDb:true"}return f},addBehaviorKey:function(f){if(document.body&&!this.options.excludeAddBehavior&&document.body.addBehavior){f.push("addBehaviorKey");d=d+",addBehavior:true"}else{d=d+",addBehavior:false"}return f},openDatabaseKey:function(f){if(!this.options.excludeOpenDatabase&&window.openDatabase){f.push("openDatabase");d=d+",openDatabase:true"}else{d=d+",openDatabase:false"}return f},cpuClassKey:function(f){if(!this.options.excludeCpuClass){f.push(this.getNavigatorCpuClass());d=d+",cpu:"+this.getNavigatorCpuClass()}return f},platformKey:function(f){if(!this.options.excludePlatform){f.push(this.getNavigatorPlatform());d=d+",platform:"+this.getNavigatorPlatform()}return f},doNotTrackKey:function(f){if(!this.options.excludeDoNotTrack){f.push(this.getDoNotTrack());d=d+",track:"+this.getDoNotTrack()}return f},canvasKey:function(f){if(!this.options.excludeCanvas&&this.isCanvasSupported()){f.push(this.getCanvasFp());d=d+",canvas:"+hex_md5(this.getCanvasFp())}return f},webglKey:function(f){if(!this.options.excludeWebGL&&this.isCanvasSupported()){f.push(this.getWebglFp());d=d+",webglFp:"+hex_md5(this.getWebglFp())}return f},pluginsKey:function(f){if(this.isIE()){f.push(this.getIEPluginsString());d=d+",plugins:"+hex_md5(this.getIEPluginsString())}else{f.push(this.getRegularPluginsString());d=d+",plugins:"+hex_md5(this.getRegularPluginsString())}return f},getRegularPluginsString:function(){return this.map(navigator.plugins,function(l){var f=this.map(l,function(m){return[m.type,m.suffixes].join("~")}).join(",");return[l.name,l.description,f].join("::")},this).join(";")},getIEPluginsString:function(){if(window.ActiveXObject){var f=["AcroPDF.PDF","Adodb.Stream","AgControl.AgControl","DevalVRXCtrl.DevalVRXCtrl.1","MacromediaFlashPaper.MacromediaFlashPaper","Msxml2.DOMDocument","Msxml2.XMLHTTP","PDF.PdfCtrl","QuickTime.QuickTime","QuickTimeCheckObject.QuickTimeCheck.1","RealPlayer","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","Scripting.Dictionary","SWCtl.SWCtl","Shell.UIHelper","ShockwaveFlash.ShockwaveFlash","Skype.Detection","TDCCtl.TDCCtl","WMPlayer.OCX","rmocx.RealPlayer G2 Control","rmocx.RealPlayer G2 Control.1"];
return this.map(f,function(l){try{new ActiveXObject(l);return l}catch(m){return null}}).join(";")}else{return""}},hasSessionStorage:function(){try{return !!window.sessionStorage}catch(f){return true}},hasLocalStorage:function(){try{return !!window.localStorage}catch(f){return true}},hasIndexedDB:function(){return !!window.indexedDB},getNavigatorCpuClass:function(){if(navigator.cpuClass){return navigator.cpuClass}else{return"unknown"}},getNavigatorPlatform:function(){if(navigator.platform){return navigator.platform}else{return"unknown"}},getDoNotTrack:function(){if(navigator.doNotTrack){return navigator.doNotTrack}else{return"unknown"}},getCanvasFp:function(){var m=document.createElement("canvas");var l=m.getContext("2d");var f="Cwm fjordbank glyphs vext quiz, https://github.com/valve ?";l.textBaseline="top";l.font="70px 'Arial'";l.textBaseline="alphabetic";l.fillStyle="#f60";l.fillRect(125,1,62,20);l.fillStyle="#069";l.fillText(f,2,15);l.fillStyle="rgba(102, 204, 0, 0.7)";l.fillText(f,4,17);return m.toDataURL()},getWebglFp:function(){var n;var f=function(v){n.clearColor(0,0,0,1);n.enable(n.DEPTH_TEST);n.depthFunc(n.LEQUAL);n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT);return"["+v[0]+", "+v[1]+"]"};var s=function(x){var w,v=x.getExtension("EXT_texture_filter_anisotropic")||x.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||x.getExtension("MOZ_EXT_texture_filter_anisotropic");return v?(w=x.getParameter(v.MAX_TEXTURE_MAX_ANISOTROPY_EXT),0===w&&(w=2),w):null};n=this.getWebglCanvas();if(!n){return null}var u=[];var l="attribute vec2 attrVertex;varying vec2 varyinTexCoordinate;uniform vec2 uniformOffset;void main(){varyinTexCoordinate=attrVertex+uniformOffset;gl_Position=vec4(attrVertex,0,1);}";var o="precision mediump float;varying vec2 varyinTexCoordinate;void main() {gl_FragColor=vec4(varyinTexCoordinate,0,1);}";var r=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,r);var p=new Float32Array([-0.2,-0.9,0,0.4,-0.26,0,0,0.732134444,0]);n.bufferData(n.ARRAY_BUFFER,p,n.STATIC_DRAW);r.itemSize=3;r.numItems=3;var m=n.createProgram(),q=n.createShader(n.VERTEX_SHADER);n.shaderSource(q,l);n.compileShader(q);var t=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(t,o);n.compileShader(t);n.attachShader(m,q);n.attachShader(m,t);n.linkProgram(m);n.useProgram(m);m.vertexPosAttrib=n.getAttribLocation(m,"attrVertex");m.offsetUniform=n.getUniformLocation(m,"uniformOffset");n.enableVertexAttribArray(m.vertexPosArray);n.vertexAttribPointer(m.vertexPosAttrib,r.itemSize,n.FLOAT,!1,0,0);n.uniform2f(m.offsetUniform,1,1);n.drawArrays(n.TRIANGLE_STRIP,0,r.numItems);if(n.canvas!=null){u.push(n.canvas.toDataURL())}u.push("extensions:"+n.getSupportedExtensions().join(";"));u.push("webgl aliased line width range:"+f(n.getParameter(n.ALIASED_LINE_WIDTH_RANGE)));u.push("webgl aliased point size range:"+f(n.getParameter(n.ALIASED_POINT_SIZE_RANGE)));u.push("webgl alpha bits:"+n.getParameter(n.ALPHA_BITS));u.push("webgl antialiasing:"+(n.getContextAttributes().antialias?"yes":"no"));u.push("webgl blue bits:"+n.getParameter(n.BLUE_BITS));u.push("webgl depth bits:"+n.getParameter(n.DEPTH_BITS));u.push("webgl green bits:"+n.getParameter(n.GREEN_BITS));u.push("webgl max anisotropy:"+s(n));u.push("webgl max combined texture image units:"+n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS));u.push("webgl max cube map texture size:"+n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE));u.push("webgl max fragment uniform vectors:"+n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS));u.push("webgl max render buffer size:"+n.getParameter(n.MAX_RENDERBUFFER_SIZE));u.push("webgl max texture image units:"+n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS));u.push("webgl max texture size:"+n.getParameter(n.MAX_TEXTURE_SIZE));u.push("webgl max varying vectors:"+n.getParameter(n.MAX_VARYING_VECTORS));u.push("webgl max vertex attribs:"+n.getParameter(n.MAX_VERTEX_ATTRIBS));u.push("webgl max vertex texture image units:"+n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS));u.push("webgl max vertex uniform vectors:"+n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS));u.push("webgl max viewport dims:"+f(n.getParameter(n.MAX_VIEWPORT_DIMS)));u.push("webgl red bits:"+n.getParameter(n.RED_BITS));u.push("webgl renderer:"+n.getParameter(n.RENDERER));u.push("webgl shading language version:"+n.getParameter(n.SHADING_LANGUAGE_VERSION));u.push("webgl stencil bits:"+n.getParameter(n.STENCIL_BITS));u.push("webgl vendor:"+n.getParameter(n.VENDOR));u.push("webgl version:"+n.getParameter(n.VERSION));return u.join("§")},isCanvasSupported:function(){var f=document.createElement("canvas");return !!(f.getContext&&f.getContext("2d"))},isIE:function(){if(navigator.appName==="Microsoft Internet Explorer"){return true}else{if(navigator.appName==="Netscape"&&/Trident/.test(navigator.userAgent)){return true}}return false},hasSwfObjectLoaded:function(){return typeof window.swfobject!=="undefined"},hasMinFlashInstalled:function(){return swfobject.hasFlashPlayerVersion("9.0.0")},addFlashDivNode:function(){var f=document.createElement("div");
f.setAttribute("id",this.options.swfContainerId);document.body.appendChild(f)},loadSwfAndDetectFonts:function(l){var m="___fp_swf_loaded";window[m]=function(p){l(p)};var o=this.options.swfContainerId;this.addFlashDivNode();var f={onReady:m};var n={allowScriptAccess:"always",menu:"false"};swfobject.embedSWF(this.options.swfPath,o,"1","1","9.0.0",false,f,n,{})},getWebglCanvas:function(){var f=document.createElement("canvas");var m=null;try{m=f.getContext("webgl")||f.getContext("experimental-webgl")}catch(l){}if(!m){m=null}return m},each:function(q,p,o){if(q===null){return}if(this.nativeForEach&&q.forEach===this.nativeForEach){q.forEach(p,o)}else{if(q.length===+q.length){for(var n=0,f=q.length;n<f;n++){if(p.call(o,q[n],n,q)==={}){return}}}else{for(var m in q){if(q.hasOwnProperty(m)){if(p.call(o,q[m],m,q)==={}){return}}}}}},map:function(n,m,l){var f=[];if(n==null){return f}if(this.nativeMap&&n.map===this.nativeMap){return n.map(m,l)}this.each(n,function(q,o,p){f[f.length]=m.call(l,q,o,p)});return f},x64Add:function(f,p){f=[f[0]>>>16,f[0]&65535,f[1]>>>16,f[1]&65535];p=[p[0]>>>16,p[0]&65535,p[1]>>>16,p[1]&65535];var l=[0,0,0,0];l[3]+=f[3]+p[3];l[2]+=l[3]>>>16;l[3]&=65535;l[2]+=f[2]+p[2];l[1]+=l[2]>>>16;l[2]&=65535;l[1]+=f[1]+p[1];l[0]+=l[1]>>>16;l[1]&=65535;l[0]+=f[0]+p[0];l[0]&=65535;return[(l[0]<<16)|l[1],(l[2]<<16)|l[3]]},x64Multiply:function(f,p){f=[f[0]>>>16,f[0]&65535,f[1]>>>16,f[1]&65535];p=[p[0]>>>16,p[0]&65535,p[1]>>>16,p[1]&65535];var l=[0,0,0,0];l[3]+=f[3]*p[3];l[2]+=l[3]>>>16;l[3]&=65535;l[2]+=f[2]*p[3];l[1]+=l[2]>>>16;l[2]&=65535;l[2]+=f[3]*p[2];l[1]+=l[2]>>>16;l[2]&=65535;l[1]+=f[1]*p[3];l[0]+=l[1]>>>16;l[1]&=65535;l[1]+=f[2]*p[2];l[0]+=l[1]>>>16;l[1]&=65535;l[1]+=f[3]*p[1];l[0]+=l[1]>>>16;l[1]&=65535;l[0]+=(f[0]*p[3])+(f[1]*p[2])+(f[2]*p[1])+(f[3]*p[0]);l[0]&=65535;return[(l[0]<<16)|l[1],(l[2]<<16)|l[3]]},x64Rotl:function(f,l){l%=64;if(l===32){return[f[1],f[0]]}else{if(l<32){return[(f[0]<<l)|(f[1]>>>(32-l)),(f[1]<<l)|(f[0]>>>(32-l))]}else{l-=32;return[(f[1]<<l)|(f[0]>>>(32-l)),(f[0]<<l)|(f[1]>>>(32-l))]}}},x64LeftShift:function(f,l){l%=64;if(l===0){return f}else{if(l<32){return[(f[0]<<l)|(f[1]>>>(32-l)),f[1]<<l]}else{return[f[1]<<(l-32),0]}}},x64Xor:function(f,l){return[f[0]^l[0],f[1]^l[1]]},x64Fmix:function(f){f=this.x64Xor(f,[0,f[0]>>>1]);f=this.x64Multiply(f,[4283543511,3981806797]);f=this.x64Xor(f,[0,f[0]>>>1]);f=this.x64Multiply(f,[3301882366,444984403]);f=this.x64Xor(f,[0,f[0]>>>1]);return f},x64hash128:function(s,n){s=s||"";n=n||0;var t=s.length%16;var u=s.length-t;var r=[0,n];var q=[0,n];var p=[0,0];var o=[0,0];var m=[2277735313,289559509];var f=[1291169091,658871167];for(var l=0;l<u;l=l+16){p=[((s.charCodeAt(l+4)&255))|((s.charCodeAt(l+5)&255)<<8)|((s.charCodeAt(l+6)&255)<<16)|((s.charCodeAt(l+7)&255)<<24),((s.charCodeAt(l)&255))|((s.charCodeAt(l+1)&255)<<8)|((s.charCodeAt(l+2)&255)<<16)|((s.charCodeAt(l+3)&255)<<24)];o=[((s.charCodeAt(l+12)&255))|((s.charCodeAt(l+13)&255)<<8)|((s.charCodeAt(l+14)&255)<<16)|((s.charCodeAt(l+15)&255)<<24),((s.charCodeAt(l+8)&255))|((s.charCodeAt(l+9)&255)<<8)|((s.charCodeAt(l+10)&255)<<16)|((s.charCodeAt(l+11)&255)<<24)];p=this.x64Multiply(p,m);p=this.x64Rotl(p,31);p=this.x64Multiply(p,f);r=this.x64Xor(r,p);r=this.x64Rotl(r,27);r=this.x64Add(r,q);r=this.x64Add(this.x64Multiply(r,[0,5]),[0,1390208809]);o=this.x64Multiply(o,f);o=this.x64Rotl(o,33);o=this.x64Multiply(o,m);q=this.x64Xor(q,o);q=this.x64Rotl(q,31);q=this.x64Add(q,r);q=this.x64Add(this.x64Multiply(q,[0,5]),[0,944331445])}p=[0,0];o=[0,0];switch(t){case 15:o=this.x64Xor(o,this.x64LeftShift([0,s.charCodeAt(l+14)],48));case 14:o=this.x64Xor(o,this.x64LeftShift([0,s.charCodeAt(l+13)],40));case 13:o=this.x64Xor(o,this.x64LeftShift([0,s.charCodeAt(l+12)],32));case 12:o=this.x64Xor(o,this.x64LeftShift([0,s.charCodeAt(l+11)],24));case 11:o=this.x64Xor(o,this.x64LeftShift([0,s.charCodeAt(l+10)],16));case 10:o=this.x64Xor(o,this.x64LeftShift([0,s.charCodeAt(l+9)],8));case 9:o=this.x64Xor(o,[0,s.charCodeAt(l+8)]);o=this.x64Multiply(o,f);o=this.x64Rotl(o,33);o=this.x64Multiply(o,m);q=this.x64Xor(q,o);case 8:p=this.x64Xor(p,this.x64LeftShift([0,s.charCodeAt(l+7)],56));case 7:p=this.x64Xor(p,this.x64LeftShift([0,s.charCodeAt(l+6)],48));case 6:p=this.x64Xor(p,this.x64LeftShift([0,s.charCodeAt(l+5)],40));case 5:p=this.x64Xor(p,this.x64LeftShift([0,s.charCodeAt(l+4)],32));case 4:p=this.x64Xor(p,this.x64LeftShift([0,s.charCodeAt(l+3)],24));case 3:p=this.x64Xor(p,this.x64LeftShift([0,s.charCodeAt(l+2)],16));case 2:p=this.x64Xor(p,this.x64LeftShift([0,s.charCodeAt(l+1)],8));case 1:p=this.x64Xor(p,[0,s.charCodeAt(l)]);p=this.x64Multiply(p,m);p=this.x64Rotl(p,31);p=this.x64Multiply(p,f);r=this.x64Xor(r,p)}r=this.x64Xor(r,[0,s.length]);q=this.x64Xor(q,[0,s.length]);r=this.x64Add(r,q);q=this.x64Add(q,r);r=this.x64Fmix(r);q=this.x64Fmix(q);r=this.x64Add(r,q);q=this.x64Add(q,r);return("00000000"+(r[0]>>>0).toString(16)).slice(-8)+("00000000"+(r[1]>>>0).toString(16)).slice(-8)+("00000000"+(q[0]>>>0).toString(16)).slice(-8)+("00000000"+(q[1]>>>0).toString(16)).slice(-8)
}};return g});